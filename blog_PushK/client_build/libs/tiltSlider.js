;(function(window){'use strict';Modernizr.addTest('csstransformspreserve3d',function(){var prop=Modernizr.prefixed('transformStyle');var val='preserve-3d';var computedStyle;if(!prop)return false;prop=prop.replace(/([A-Z])/g,function(str,m1){return'-'+m1.toLowerCase();}).replace(/^ms-/,'-ms-');Modernizr.testStyles('#modernizr{'+prop+':'+val+';}',function(el,rule){computedStyle=window.getComputedStyle?getComputedStyle(el,null).getPropertyValue(prop):'';});return(computedStyle===val);});var support={animations:Modernizr.cssanimations,preserve3d:Modernizr.csstransformspreserve3d,transforms3d:Modernizr.csstransforms3d},isSupported=support.animations&&support.preserve3d&&support.transforms3d,animEndEventNames={'WebkitAnimation':'webkitAnimationEnd','OAnimation':'oAnimationEnd','msAnimation':'MSAnimationEnd','animation':'animationend'},animEndEventName=animEndEventNames[Modernizr.prefixed('animation')];function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key];}}return a;}function TiltSlider(el,options){this.el=el;this.animEffectsOut=['moveUpOut','moveDownOut','slideUpOut','slideDownOut','slideLeftOut','slideRightOut'];this.animEffectsIn=['moveUpIn','moveDownIn','slideUpIn','slideDownIn','slideLeftIn','slideRightIn'];this.items=this.el.querySelector('ol.slides').children;this.itemsCount=this.items.length;if(!this.itemsCount)return;this.current=0;this.options=extend({},this.options);extend(this.options,options);this._init();}TiltSlider.prototype.options={};TiltSlider.prototype._init=function(){this._addNavigation();this._initEvents();}
TiltSlider.prototype._addNavigation=function(){this.nav=document.createElement('nav')
var inner='';for(var i=0;i<this.itemsCount;++i){inner+=i===0?'<span class="current"></span>':'<span></span>';}this.nav.innerHTML=inner;this.el.appendChild(this.nav);this.navDots=[].slice.call(this.nav.children);}
TiltSlider.prototype._initEvents=function(){var self=this;this.navDots.forEach(function(dot,idx){dot.addEventListener('click',function(){if(idx!==self.current){self._showItem(idx);}});});}
TiltSlider.prototype._showItem=function(pos){if(this.isAnimating){return false;}this.isAnimating=true;classie.removeClass(this.navDots[this.current],'current');var self=this,currentItem=this.items[this.current];this.current=pos;var nextItem=this.items[this.current],outEffect=this.animEffectsOut[Math.floor(Math.random()*this.animEffectsOut.length)],inEffect=this.animEffectsIn[Math.floor(Math.random()*this.animEffectsOut.length)];currentItem.setAttribute('data-effect-out',outEffect);nextItem.setAttribute('data-effect-in',inEffect);classie.addClass(this.navDots[this.current],'current');var cntAnims=0,animElemsCurrentCount=currentItem.querySelector('.tiltview').children.length,animElemsNextCount=nextItem.querySelector('.tiltview').children.length,animEndCurrentCnt=0,animEndNextCnt=0,isFinished=function(){++cntAnims;if(cntAnims===2){self.isAnimating=false;}},onEndAnimationCurrentItem=function(){++animEndCurrentCnt;var endFn=function(){classie.removeClass(currentItem,'hide');classie.removeClass(currentItem,'current');isFinished();};if(!isSupported){endFn();}else if(animEndCurrentCnt===animElemsCurrentCount){currentItem.removeEventListener(animEndEventName,onEndAnimationCurrentItem);endFn();}},onEndAnimationNextItem=function(){++animEndNextCnt;var endFn=function(){classie.removeClass(nextItem,'show');classie.addClass(nextItem,'current');isFinished();};if(!isSupported){endFn();}else if(animEndNextCnt===animElemsNextCount){nextItem.removeEventListener(animEndEventName,onEndAnimationNextItem);endFn();}};classie.addClass(currentItem,'hide');classie.addClass(nextItem,'show');if(isSupported){currentItem.addEventListener(animEndEventName,onEndAnimationCurrentItem);nextItem.addEventListener(animEndEventName,onEndAnimationNextItem);}else{onEndAnimationCurrentItem();onEndAnimationNextItem();}}
window.TiltSlider=TiltSlider;})(window);